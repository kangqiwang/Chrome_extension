const should = require('should');
const UrlModel = require('../index.js').model.url
const config = {
                    db: "se",
                    host: "127.0.0.1",
                    port: 27017
                }

describe('Url Test', function() {

        it('should save url data', function(done) {
                var Url = new UrlModel(config)
                var url = "https://www.disneystore.com/accessories/jewelry/earrings/mn/1010212/"
                Url.saveData({
                    url,
                    data: {
                        "SOME" : "DATA"
                    }                                        
                }, (err, result) => {
                    should(err).be.equal(null)
                    result.should.be.equal(true)                    
                    Url.findByUrl({
                        url
                    }, (err, record) => {
                        should(err).be.equal(null)
                        console.log(record)
                        record.should.be.have.property('data')
                        done();
                    })
                    
                })

        })

})
