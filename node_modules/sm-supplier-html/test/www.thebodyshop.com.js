    var should = require('should');
    var Structure = require('../lib/structure.js')
    const cache = require('../lib/cache')

    describe('supplierTest', function () {

        describe('Search Page', function () {

            var payload = {
                "pageType": "search",
                "url": "https://www.thebodyshop.com/en-gb/body/accessories/c/c00012",
                "html": cache.load("https://www.thebodyshop.com/en-gb/body/accessories/c/c00012")
            }
            var x = 44
            it('should return' + x + ' number of products', function () {

                const searchPage = Structure(payload)
              //  console.log(searchPage)
                searchPage.length.should.equal(x)


                var first = searchPage.shift()
                first.name.should.be.equal("Ultra Fine Bath Lily");
                first.price.should.be.equal("2.50");
                first.url.should.be.equal("https://www.thebodyshop.com/en-gb/body/view-all/ultra-fine-bath-lily/p/p000310");
                first.image.should.be.equal("https://assets.thebodyshop.com/medias/ultra-fine-bath-lily-1027519-cream-2-320x320.jpg?context=product-images/h06/h57/10794805559326/ultra-fine-bath-lily-1027519-cream_2-320x320.jpg")
                first.country.should.be.equal('uk');

                var last = searchPage.pop()

                last.name.should.be.equal("Dani the Baby Deer Headband");
                last.price.should.be.equal("4.00");
                last.url.should.be.equal("https://www.thebodyshop.com/en-gb/body/accessories/dani-the-baby-deer-headband/p/p003061");
                last.image.should.be.equal("https://assets.thebodyshop.com/medias/dani-the-baby-deer-headband-1-320x320.jpg?context=product-images/hf7/h6f/29145417220126/dani-the-baby-deer-headband_1-320x320.jpg")
                last.country.should.be.equal('uk');


            });

        });

        describe('In stock Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.thebodyshop.com/en-gb/body/accessories/hemp-body-mitt-natural/p/p000741",
                "html": cache.load("https://www.thebodyshop.com/en-gb/body/accessories/hemp-body-mitt-natural/p/p000741")
            }

            it('should be true when product is in stock', function () {

                const inStockPage = Structure(payload)
                 console.log(inStockPage)
                inStockPage.name.should.be.equal("Hemp Body Mitt - Natural");
                inStockPage.price.should.be.equal("7.00");
                inStockPage.url.should.be.equal(payload.url);
                inStockPage.inStock.should.be.equal(true);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.inStock.should.be.equal(true);
                inStockPage.image.should.be.equal('https://assets.thebodyshop.com/medias/tbs-logo.svg?context=content-images/h4d/h7c/8796377514014/tbs-logo.svg');
                inStockPage.country.should.be.equal('uk');
            });

        });

        describe('Out Of Stock Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.thebodyshop.com/en-gb/favourites-old/top-rated/twin-ball-massager/p/p000166",
                "html": cache.load("https://www.thebodyshop.com/en-gb/favourites-old/top-rated/twin-ball-massager/p/p000166")
            }

            it('should return false when product is out of stock', function () {

                const inStockPage = Structure(payload)
                inStockPage.name.should.be.equal("Twin-Ball Massager");
                inStockPage.price.should.be.equal('7.00');
                inStockPage.url.should.be.equal(payload.url);
            //    inStockPage.inStock.should.be.equal(false);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.image.should.be.equal('https://assets.thebodyshop.com/medias/tbs-logo.svg?context=content-images/h4d/h7c/8796377514014/tbs-logo.svg');
                inStockPage.country.should.be.equal('uk');
            });

        });

    });