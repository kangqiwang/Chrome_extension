
function generateCheckDigit(string) {
    if (/[^0-9]/.test(string)) return null;
    const sum = string
        .split('')
        .reverse()
        .map((value, index) => value * ((index % 2) ? 1 : 3))
        .reduce((a, b) => a + b, 0);
    return (10 - sum % 10) % 10;
}

function addCheckDigit(string) {
    return string + generateCheckDigit(string);
}

function isValid(string) {
    if(!string) {
      return false
    }
    string = string.trim()
    if (/[^0-9]/.test(string)) return false;
    return (string === addCheckDigit(string.slice(0, -1)));
}

module.exports = {
    generateCheckDigit: generateCheckDigit,
    addCheckDigit: addCheckDigit,
    isValid: isValid
};
