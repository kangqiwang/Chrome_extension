const should = require('should');
const CrawlerModel = require('../index.js').model.crawlers
const config = {
                    db: "se",
                    host: "127.0.0.1",
                    port: 27017
                }

describe("Crawler Test", function() {

        it("Should return Crawlers in progress", function(done) {

            var Crawler = new CrawlerModel(config)

            Crawler.getCrawlers({
                country: "us",
                status: "IN_PROGRESS"
            }, (err, result) => {
                should(err).be.equal(null)
                console.log(result)
                done()
            })
        })

        it("should update the status of crawler", function(done){
             var Crawler = new CrawlerModel(config)

             Crawler.markComplete({
                status: "COMPLETED",
                id: "592ff2cb7ad7180c862f4ae3"
            }, (err, result) => {
                should(err).be.equal(null)
                done()
            })
        })
})