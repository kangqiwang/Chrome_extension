const handle = require('../lib/mongo/handle');
const Base = require('../lib/mongo/base');
const mongodb = require('mongodb');

class MarketingEmails extends Base {
    constructor(config) {
		super(config, 'marketingemails');
    }

    saveLeadEmails(message, next)  {
        this.find({email: message.email}, (err, result) => {
            if(err) {
                next(err)
            } else {
                if(result.records.length > 0) {
                    next(err, "ALREADY IN DB")
                } else {
                    this.insert({email: message.email}, (err, result) => {
                        next(err, result)
                    })
                }
            }
        })
    }
}

module.exports = MarketingEmails