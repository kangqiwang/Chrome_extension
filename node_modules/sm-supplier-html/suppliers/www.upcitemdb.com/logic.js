var SearchPageInfo = require ('../../lib/searchPageInfo.js')

module.exports = {
     //"useJavascript" : true,
     'search' : function($, next) {
        var result = []

        $('.upclist').find('li').map(function(index, product) {
            var info = new SearchPageInfo()
            info.barcode = searchBarcode($,product)
            info.name = searchName($,product)
            info.url = searchURL($,product)
            info.image = searchImage($,product)
            info.country = ""
           
            if ((info.barcode != null) && (info.barcode != ""))
            {
                result.push(info)            
            }            
        });
        return result
    }
}


function searchBarcode($, product) {
    return $(product).find('.rImage').find('a').text();
}

function searchName($, product) {
    return $(product).find('.rImage').find('p').text();
}

function searchURL($, product) {
    return "http://www.upcitemdb.com" + $(product).find('.rImage').find('a').attr('href')
}


function searchImage($, product) {

}