const expect = require('chai').expect;
const UrlModel = require('../model/url');
const config = require('../config');

const url = new UrlModel(config.mongoDb);

describe('Stats for crawler jobs', () => {

    beforeEach(() => {

    });

    it('should return the number of urls that are currently being run', (done) => {
        let payload = {
            supplierId: '585933e8b531bd29e25a9428',
            country: 'uk'
        };
        url.findStats(payload, (err, data) => {
            expect(err).to.equal(null);
            expect(data).to.have.property('allUrls');
            expect(data).to.have.property('runSinceMidnight');
            expect(data.allUrls).to.be.a('number');
            expect(data.runSinceMidnight).to.be.a('number');
            //console.log('data: ', data);
            done();
        });
    });

});
