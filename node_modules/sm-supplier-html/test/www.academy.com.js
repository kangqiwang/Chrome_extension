    var should = require('should');
    var Structure = require('../lib/structure.js')
    const cache = require('../lib/cache')

    describe('www.bedbathandbeyond.com', function () {


        describe('In stock Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.bedbathandbeyond.com/store/product/fisher-price-reg-doodle-pro-reg-super-stamper/5175741?categoryId=12985",
                "html": cache.load("https://www.bedbathandbeyond.com/store/product/fisher-price-reg-doodle-pro-reg-super-stamper/5175741?categoryId=12985")
            }

            it('should be true when product is in stock', function () {

                const inStockPage = Structure(payload)
                inStockPage.name.should.be.equal("Fisher-Price® Doodle Pro® Super Stamper");
                inStockPage.price.should.be.equal("19.99");
                inStockPage.url.should.be.equal(payload.url);
                inStockPage.inStock.should.be.equal(true);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.inStock.should.be.equal(true);
                inStockPage.image.should.be.equal('http://s7d2.scene7.com/is/image/BedBathandBeyond/184779365058985p?$478$');
                inStockPage.country.should.be.equal('us');
            });

        });

    });

    xdescribe('Out of Stock Page', function () {

        var payload = {
            "pageType": "product",
            "url": "http://www.bedbathandbeyond.com//store/product/geek-out-game/1045922268?categoryId=12984#",
            "html": cache.load("http://www.bedbathandbeyond.com//store/product/geek-out-game/1045922268?categoryId=12984#")
        }

        it('should be false when a product is out of stock', function () {

            const inStockPage = Structure(payload)
            inStockPage.name.should.be.equal("SanDisk Extreme PRO 16GB SDHC UHS-II Memory Card");
            inStockPage.price.should.be.equal("24.97");
            inStockPage.url.should.be.equal(payload.url);
            inStockPage.inStock.should.be.equal(false);
            should(inStockPage.stockLevel).be.equal(null);
            inStockPage.image.should.be.equal('http://www.jessops.com/ce-images/PRODUCT/PRODUCT_LARGE/ASANDDS275272634.jpg');
            inStockPage.country.should.be.equal('uk');
        });

    });

    describe('Search page category', function () {

        var payload = {
            "pageType": "category",
            "url": "https://www.bedbathandbeyond.com/store/category/baby-kids/infant-toys-ages-0-3-years/10572/?_requestid=4161317",
            "html": cache.load("https://www.bedbathandbeyond.com/store/category/baby-kids/infant-toys-ages-0-3-years/10572/?_requestid=4161317")
        }

        it('should be true when number of items and pages correct', function () {

            const categoryPage = Structure(payload)
            categoryPage.name.should.be.equal("Infant Toys (Ages 0 - 3 Years)");
            categoryPage.url.should.be.equal(payload.url);
        });
    })

    describe('Search Page', function () {

        var payload = {
            "pageType": "search",
            "url": "https://www.acehardware.com/departments/outdoor-living/coolers/soft-sided-coolers",
            "html": cache.load("https://www.acehardware.com/departments/outdoor-living/coolers/soft-sided-coolers")
        }
        var x = 12
        it('should return' + x + ' number of products', function () {

            const searchPage = Structure(payload)
            console.log(searchPage)
            searchPage.length.should.equal(x)

            var first = searchPage.shift()
            first.name.should.be.equal("Fisher-Price® Doodle Pro® Super Stamper");
            first.price.should.be.equal("19.99");
            first.url.should.be.equal("https://www.bedbathandbeyond.com/store/product/fisher-price-reg-doodle-pro-reg-super-stamper/5175741?categoryId=12985");
            first.image.should.be.equal("https://s7d2.scene7.com/is/image/BedBathandBeyond/184779365058985p?$229$");
            first.country.should.be.equal('us');

            var last = searchPage.pop()
            last.name.should.be.equal("Melissa &amp; Doug® Sticker Pad Play Bundle (Set of 2)");
            last.price.should.be.equal("9.99");
            last.url.should.be.equal("https://www.bedbathandbeyond.com/store/product/melissa-doug-reg-sticker-pad-play-bundle-set-of-2/1045926723?categoryId=12985");
            first.image.should.be.equal("https://s7d2.scene7.com/is/image/BedBathandBeyond/184779365058985p?$229$");
            last.country.should.be.equal('us');
        });

    });