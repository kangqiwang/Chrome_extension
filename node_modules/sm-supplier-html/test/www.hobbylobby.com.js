    var should = require('should');
    var Structure = require('../lib/structure.js')
    const cache = require('../lib/cache')

    describe('supplierTest', function () {

        describe('Search Page', function () {

            var payload = {
                "pageType": "search",
                "url": "https://www.hobbylobby.com/Clearance/Clearance---Art/c/8-999",
                "html": cache.load("https://www.hobbylobby.com/Clearance/Clearance---Art/c/8-999")
            }
            var x = 40
            it('should return' + x + ' number of products', function () {

                const searchPage = Structure(payload)
                //    console.log(searchPage)
                searchPage.length.should.equal(x)


                var first = searchPage.shift()
                first.name.should.be.equal("Mastering Manga with Mark Crilley");
                first.price.should.be.equal("13.79");
                first.url.should.be.equal("http://www.hobbylobby.com/Clearance/Clearance---Art/Clearance---Art-Books/Mastering-Manga-with-Mark-Crilley/p/3957");
                first.image.should.be.equal("http://imgprod60.hobbylobby.com/sys-master/migrated/hd4/h73/h00/8950410149918/475384_1[1].jpg")
                first.country.should.be.equal('us');

                var last = searchPage.pop()

                last.name.should.be.equal("0.4mm Stabilo Point Marker Set");
                last.price.should.be.equal("17.99");
                last.url.should.be.equal("http://www.hobbylobby.com/Clearance/Clearance---Art/Clearance---Drawing-Illustration/0-4mm-Stabilo-Point-Marker-Set/p/80785412");
                last.image.should.be.equal("http://imgprod60.hobbylobby.com/sys-master/migrated/he7/hdc/h00/9214195793950/1340884[1].jpg")
                last.country.should.be.equal('us');


            });

        });

        describe('In stock Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.hobbylobby.com/Clearance/Clearance---Crafts-Hobbies/Clearance---Stencils-Craft-Paints/Vivid-Orange-FolkArt-Acrylic-Paint/p/382",
                "html": cache.load("https://www.hobbylobby.com/Clearance/Clearance---Crafts-Hobbies/Clearance---Stencils-Craft-Paints/Vivid-Orange-FolkArt-Acrylic-Paint/p/382")
            }

            it('should be true when product is in stock', function () {

                const inStockPage = Structure(payload)
                // console.log(inStockPage)
                inStockPage.name.should.be.equal("Vivid Orange FolkArt Acrylic Paint");
                inStockPage.price.should.be.equal("0.82");
                inStockPage.url.should.be.equal(payload.url);
                inStockPage.inStock.should.be.equal(true);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.inStock.should.be.equal(true);
                inStockPage.image.should.be.equal('https://imgprod60.hobbylobby.com/8/d1/6c/8d16cbc6d294f60aa3b7725671390a5975c04967/350Wx350H-293266-1018.jpg');
                inStockPage.country.should.be.equal('us');
            });

        });

        describe('Out Of Stock Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.hobbylobby.com/Clearance/Clearance---Crafts-Hobbies/Clearance---Model-Kits/2949-Trans-Black-Window-Tint-Model-Master-Custom-Enamel-Spray-Paint/p/1092",
                "html": cache.load("https://www.hobbylobby.com/Clearance/Clearance---Crafts-Hobbies/Clearance---Model-Kits/2949-Trans-Black-Window-Tint-Model-Master-Custom-Enamel-Spray-Paint/p/1092")
            }

            it('should return false when product is out of stock', function () {

                const inStockPage = Structure(payload)
                inStockPage.name.should.be.equal("2949 Trans Black Window Tint Model Master Custom Enamel Spray Paint");
                inStockPage.price.should.be.equal('3.71');
                inStockPage.url.should.be.equal(payload.url);
                inStockPage.inStock.should.be.equal(false);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.inStock.should.be.equal(false);
                inStockPage.image.should.be.equal('https://imgprod60.hobbylobby.com/sys-master/migrated/hb3/he4/h00/8886592077854/221127[5].jpg');
                inStockPage.country.should.be.equal('us')
            });

        });

    });