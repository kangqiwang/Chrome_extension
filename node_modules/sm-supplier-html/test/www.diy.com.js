    var should = require('should');
    var Structure = require('../lib/structure.js')
    const cache = require('../lib/cache')

    describe('supplierTest', function () {

        describe('Search Page', function () {

            var payload = {
                "pageType": "search",
                "url": "https://www.diy.com/departments/electrical/telephones-accessories/telephone-extension-kits/DIY579325.cat",
                "html": cache.load("https://www.diy.com/departments/electrical/telephones-accessories/telephone-extension-kits/DIY579325.cat")
            }
            var x = 4
            it('should return' + x + ' number of products', function () {

                const searchPage = Structure(payload)
             //   console.log(searchPage)
                searchPage.length.should.equal(x)


                var first = searchPage.shift()
                first.name.should.be.equal("TriStar White Telephone extension kit 10 m");
                first.price.should.be.equal("10.50");
                first.url.should.be.equal("https://www.diy.com/departments/tristar-white-telephone-extension-kit-10-m/571757_BQ.prd");
                first.image.should.be.equal("https://kingfisher.scene7.com/is/image/Kingfisher/5050171064863_01c?$MOB_PREV$&$width=104&$height=104")
                first.country.should.be.equal('uk');

                var last = searchPage.pop()

                last.name.should.be.equal("TriStar Slimline telephone extension kit 25 m");
                last.price.should.be.equal("8.40");
                last.url.should.be.equal("https://www.diy.com/departments/tristar-slimline-telephone-extension-kit-25-m/571427_BQ.prd");
                last.image.should.be.equal("https://kingfisher.scene7.com/is/image/Kingfisher/5050171064306_01c?$MOB_PREV$&$width=104&$height=104")
                last.country.should.be.equal('uk');

    
            });

        });

        describe('In stock Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.diy.com/departments/tristar-white-telephone-extension-kit-10-m/571757_BQ.prd",
                "html": cache.load("https://www.diy.com/departments/tristar-white-telephone-extension-kit-10-m/571757_BQ.prd")
            }

            it('should be true when product is in stock', function () {

                const inStockPage = Structure(payload)
               // console.log(inStockPage)
                inStockPage.name.should.be.equal("TriStar White Telephone extension kit 10 m");
                inStockPage.price.should.be.equal("10.50");
                inStockPage.url.should.be.equal(payload.url);
                inStockPage.inStock.should.be.equal(true);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.inStock.should.be.equal(true);
                inStockPage.image.should.be.equal('https://kingfisher.scene7.com/is/image/Kingfisher/5050171064863_01c?$MOB_PREV$&$width=960&$height=960');
                inStockPage.country.should.be.equal('uk');
                inStockPage.sku.should.be.equal('571757_BQ')
            });

        });

        describe('Out Of Stock Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.diy.com/departments/battery-powered-singing-fairy-animation/3663602543251_BQ.prd",
                "html": cache.load("https://www.diy.com/departments/battery-powered-singing-fairy-animation/3663602543251_BQ.prd")
            }

            it('should return false when product is out of stock', function () {

                const inStockPage = Structure(payload)
                inStockPage.name.should.be.equal("Battery powered Singing Fairy Animation");
           //     inStockPage.price.should.be.equal('10.00');
                inStockPage.url.should.be.equal(payload.url);
                inStockPage.inStock.should.be.equal(false);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.inStock.should.be.equal(false);
                inStockPage.image.should.be.equal('https://kingfisher.scene7.com/is/image/Kingfisher/mobileBlank?$MOB_PREV_ROUNDEL_SCALE1$&$image=Kingfisher/3663602543251_01i&$roundel=Kingfisher/new_green&$width=960&$height=960');
                inStockPage.country.should.be.equal('uk');
                inStockPage.sku.should.be.equal('3663602543251_BQ')
            });

        });

    });