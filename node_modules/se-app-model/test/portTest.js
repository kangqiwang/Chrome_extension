const should = require('should');
const PortModel = require('../index.js').model.port
const config = {
                    db: "se",
                    host: "127.0.0.1",
                    port: 27017
                }

describe('Port Test', function() {

        it('should return Ports as array', function(done) {
                var Port = new PortModel(config)

                Port.find({}, (err, result) => {
                    should(err).be.equal(null)
                    result.should.have.property('total')
                    result.should.have.property('records')
                    result.total.should.be.above(0)
                    result.records.length.should.be.equal(10)
                    done();
                })

        })

        it('should return true if colletion exists', function(done) {
                var Port = new PortModel(config)

                Port.checkCollection((err, result) => {
                    should(err).be.equal(null)
                    result.should.be.equal(true)
                    done();
                })

        })

        it('should mark port as free', function(done) {
                var Port = new PortModel(config)

                Port.markAsFree({
                        port: 3000
                }, (err, result) => {
                        should(err).be.equal(null)
                        done();
                })
        })

         it('should mark port as used', function(done) {
                var Port = new PortModel(config)

                Port.markAsUsed({
                        port: 3000
                }, (err, result) => {
                        should(err).be.equal(null)
                        done();
                })
        })

})
