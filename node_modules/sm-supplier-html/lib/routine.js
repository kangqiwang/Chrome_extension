//var routine = require ("../../lib/routine.js"); 
//return routine.matchNumbersAndPop($, "");
//return routine.pagesFromTotalAndProd();
var cleanName = require("./cleanName.js");

module.exports = routine = {
    matchNumbersAndPop: function ($, query, html, debug) {
        try {
            if (html === "html") {
                var pages = $(query).html().match(/[0-9]+/g);
            } else {
                var pages = $(query).text().match(/[0-9]+/g);
            }

            if (pages) {
                pages = pages.pop();
            } else {
                pages = null;
            }
        } catch (err) {
            throw err;
        } finally {
            if (debug === true) {
                console.log("... matchNumbersAndPop (return): " + pages + " ...");
            }
        }

        return parseInt(pages);
    },
    queryAndClean: function ($, query, debug) {
        try {
            var name = cleanName($(query).text());
        } catch (err) {
            throw err;
        } finally {
            if (debug === true) {
                console.log("... queryAndClean (return): " + name + " ...");
            }
        }

        return name;
    },
    pagesFromTotalAndProd: function (totalItems, pageItems, debug) {

        try {
            if (!totalItems || !pageItems) {
                var pages = null;
            } else {
                var pages = Math.ceil(totalItems / pageItems);
            }
        } catch (err) {
            throw err;
        } finally {
            if (debug === true) {
                console.log("... pagesFromTotalAndProd (return): " + pages + " ...");
            }
        }
        return pages;
    }

}