var should = require('should');
var Structure = require('../lib/structure.js')

describe('www.ukofficedirect.co.uk', function() {

    before(function()  {
        this.timeout(5000);
    })

    describe('In Stock Page', function() {

        var payload = {
            "pageType" : "product",
            "url" : "http://www.ukofficedirect.co.uk/product/really-useful-storage-box-plastic-lightweight-robust-stackable-64-litre-w440xd710xh310mm-clear-ref-64c/KAF938"
        }

        it('should be true when product is in stock', function (done) {

            Structure(payload, function(inStockPage) {
                var expected = JSON.stringify({
                    "name": "Really Useful Storage Box Plastic Lightweight Robust Stackable 64 Litre W440xD710xH310mm Clear Ref 64C",
                    "price": null, // this page displays price exc of VAT
                    "url": null,
                    "inStock": true,
                    "stockLevel": null,
                    "image": "http://powercdn.s3.amazonaws.com/4_2014/d3623897-eb61-49cb-af78-9a6f147cbba6.jpg",
                    "country": "us"
                })
                JSON.stringify(inStockPage).should.equal(expected);
                done()
            })
        });

    });

    // describe('Out of Stock Page', function() {

    //     var payload = {
    //         "pageType" : "product",
    //         "url" : "http://www.ukofficedirect.co.uk/product/erie-visitor-cantilever-chair-black-bonded-leather-with-arms-ref-br000178/KDC716"
    //     }

    //     it('should return false when product is out of stock', function(done) {

    //         Structure(payload, function(inStockPage) {
    //             var expected = JSON.stringify({
    //                 "name": "Erie Visitor Cantilever Chair Black Bonded Leather With Arms Ref BR000178",
    //                 "price": null,
    //                 "url": null,
    //                 "inStock": false,
    //                 "stockLevel": null,
    //                 "image": "",
    //                 "country": "us"
    //             })
    //             JSON.stringify(inStockPage).should.equal(expected);
    //             done()
    //         })
    //     })

    // })

});
