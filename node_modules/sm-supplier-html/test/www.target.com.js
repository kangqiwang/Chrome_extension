    var should = require('should');
    var Structure = require('../lib/structure.js')
    const cache = require('../lib/cache')

    describe('supplierTest', function () {

        describe('Search Page', function () {

            var payload = {
                "pageType": "search",
                "url": "https://www.target.com/c/target-black-friday/-/N-5q0f2?Nao=24",
                "html": cache.load("https://www.target.com/c/target-black-friday/-/N-5q0f2?Nao=24")
            }
            var x = 6
            it('should return' + x + ' number of products', function () {

                const searchPage = Structure(payload)
                console.log(searchPage)
                searchPage.length.should.equal(x)


                var first = searchPage.shift()
                first.name.should.be.equal("L'Oréal Paris Paradise Enchanted Scented Eyeshadow Palette - 0.25 fl oz");
                first.price.should.be.equal("11.99");
                first.url.should.be.equal("https://www.northerntool.com/shop/tools/product_200697036_200697036");
                first.image.should.be.equal("http://www.northerntool.com/images/product/200x200/582/58283_200x200.jpg")
                first.country.should.be.equal('us');

                var last = searchPage.pop()

                last.name.should.be.equal("ARO Air-Operated Double Diaphragm Oil Pump — 1/2in. Ports, 12 GPM, Aluminum/Nitrile, Model# PD05R-AAS-PGG-B");
                last.price.should.be.equal("619.99");
                last.url.should.be.equal("https://www.northerntool.com/shop/tools/product_200680293_200680293");
                last.image.should.be.equal("http://www.northerntool.com/images/product/200x200/597/59739_200x200.jpg")
                last.country.should.be.equal('us');

    
            });

        });

        describe('In stock Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.target.com/p/disney-princess-shimmering-dreams-collection/-/A-51123912",
                "html": cache.load("https://www.target.com/p/disney-princess-shimmering-dreams-collection/-/A-51123912")
            }

            it('should be true when product is in stock', function () {

                const inStockPage = Structure(payload)
                inStockPage.name.should.be.equal("Disney Princess Shimmering Dreams Collection");
                inStockPage.price.should.be.equal("94.99");
                inStockPage.url.should.be.equal(payload.url);
                inStockPage.inStock.should.be.equal(true);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.inStock.should.be.equal(true);
                inStockPage.image.should.be.equal('https://www.target.com//target.scene7.com/is/image/Target/GUEST_f7dcdc95-76e0-405a-bf84-95ec94b17865?wid=488&hei=488&fmt=webp');
                inStockPage.country.should.be.equal('us');
                inStockPage.sku.should.be.equal('51123912')
            });

        });

        describe('Out Of Stock Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.target.com/p/fifa-18-legacy-edition-playstation-3/-/A-52692488",
                "html": cache.load("https://www.target.com/p/fifa-18-legacy-edition-playstation-3/-/A-52692488")
            }

            it('should return false when product is out of stock', function () {

                const inStockPage = Structure(payload)
                inStockPage.name.should.be.equal("FIFA 18 Legacy Edition - PlayStation 3");
                inStockPage.price.should.be.equal("39.99");
                inStockPage.url.should.be.equal(payload.url);
                inStockPage.inStock.should.be.equal(false);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.inStock.should.be.equal(false);
                inStockPage.image.should.be.equal('https://www.target.com//target.scene7.com/is/image/Target/GUEST_aa21a57d-4e5d-4806-9891-4516ebe80f0e?wid=488&hei=488&fmt=webp');
                inStockPage.country.should.be.equal('us');
                inStockPage.sku.should.be.equal('52692488')
            });

        });

    });