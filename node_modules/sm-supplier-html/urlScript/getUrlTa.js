const fs = require('fs')
const request = require('request')
let rawdata= fs.readFileSync('urlScript/lsOutput.json')
let student = JSON.parse(rawdata)

student.map((url)=>{
    tmpList=url.split('.')
    if(tmpList.length == 2){

    }else{
        tmpList=tmpList.slice(1)
    }
    url="https://www.tacticalbucket.com/dashboard/get-categories/"+tmpList.join('.')
    var headers ={
        'Cookie' : 'csrftoken=Qv71GSiXNXBctBEmPV5wclWP0tmzOZmGeZiDysNVar3QRwXlv7BiTHY3F9S9HZhk; expires=Mon, 16-Mar-2020 12:01:39 GMT; Max-Age=31449600; Path=/;sessionid=flzh8b26baqrmgcd2dq0fpdt8u2qknb5; httponly; Path=/; secure',
        'User-Agent':'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) snap Chromium/73.0.3683.75 Chrome/73.0.3683.75 Safari/537.36'
    }
    // let j = request.jar();
    // let cookie = request.cookie('csrftoken=FlgiOlEx7aOgcpbwe9H8IoI5ACJ6Ok8bcswSb5GiPYXpioMcXEXX769BAZg9XP6S; expires=Mon, 16-Mar-2020 11:32:05 GMT; Max-Age=31449600; Path=/');
    // j.setCookie(cookie,url)
    console.log(url)
    request({url:url,headers:headers},function(err,response,body){
        if(response.statusCode == 200){
        //     console.log(err)
        // console.log(response)
        console.log(body)
        }
        
    })

    // request(url)
    // console.log(url)

    // http.get(url,(response)=>{
    //     console.log('Got response:  '+response)
    //     if(response.statusCode == 200){
    //         console.log(url)
    //     }
    // })
})