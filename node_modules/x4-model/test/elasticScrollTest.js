const should = require('should');
const Elastic = require('../index').elastic
const config = {
    host: "127.0.0.1:9200"
}

describe('Elastic Scroll Test', () => {

    it('should return Data fromm the database', function (done) {
        var es = new Elastic(config)
        es.searchScroll({
            "index": "us-www-tvstoybox-com",
            "size": 10,
            "scroll" : "2m",
            "body": {
                "query": {
                    "match_all": {}
                }
            }
        }, processResult, (err) => {
            should(err).be.equal(null);
            done();
        })

    })

})

function processResult(data, next) {
    console.log(data.hits.hits.length)
    // Call Next to get the next scrolls
    next();
}