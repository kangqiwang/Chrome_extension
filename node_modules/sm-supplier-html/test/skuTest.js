var should = require('should');
var Sku = require('../index').sku;

describe('URL SKU Test ', function () {

    this.timeout(10000);

    describe('Given a Url', function () {

        it('should return the sku for Russell Hobbs', () => {

            var payload = {
                "pageType": "product",
                "url": "http://uk.russellhobbs.com/russell-hobbs-products/coffee-machines/brew-and-go-22630.html"
            }

            let sku = Sku(payload.url);
            sku.should.be.equal('22630');
        });

        it('should return the sku for Argos', () => {
            let sku = Sku("http://www.argos.co.uk/product/5282342");
            sku.should.be.equal('5282342');
        });

    });

    describe('Given a Target URL', function () {

        it('should return 21565031 as the sku for Peppa Pig Family 2 Pack with extra bits on url', () => {
            let url = "http://www.target.com/p/peppa-pig-family-4-pack/-/A-21565031#lnk=newtab";
            let sku = Sku(url);
            sku.should.be.equal('21565031');
        });

        it('should return 21565031 as the sku for Peppa Pig Family 2 Pack', () => {

            let url = "https://www.target.com/p/peppa-pig-family-4-pack/-/A-21565031";
            let sku = Sku(url);
            sku.should.be.equal('21565031');
        });

        

    });

});