const should = require('should');
const OpportuntiyModel = require('../index.js').model.opportunity

const config = require('../config').es;

describe('Opportunity Test', function() {

        this.timeout(10000)

        it('should return all amazon categories found in the job ID', function(done) {
                config.createIdKey = true
                var Opportunity = new OpportuntiyModel(config, {
                   country: 'us',
                   userName: 'mike'
                })

                Opportunity.findAmazonCategories("595d028814e04a2211ee3d1e", (err, result) => {
                    should(err).be.equal(null)
                    result.should.have.property('total')
                    result.should.have.property('records')
                    result.should.have.property('aggs')
                    result.aggs.should.have.property('categtory')
                    Object.keys(result.records).length.should.be.equal(0)
                    done();
                })

        })

})
