    var should = require('should');
    var Structure = require('../lib/structure.js')
    const cache = require('../lib/cache')

    describe('www.boscovs.com', function () {


        describe('In stock Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.boscovs.com/shop/prod/discovery-kids-teach-n-talk-laptop-charcoal/310524.htm?departmentNumber=10000015",
                "html": cache.load("https://www.boscovs.com/shop/prod/discovery-kids-teach-n-talk-laptop-charcoal/310524.htm?departmentNumber=10000015")
            }

            it('should be true when product is in stock', function () {

                const inStockPage = Structure(payload)
                console.log(inStockPage)
                inStockPage.name.should.be.equal("Discovery Kids™ Teach 'n' Talk Laptop - Charcoal");
                inStockPage.price.should.be.equal("14.99");
                inStockPage.url.should.be.equal("https://www.boscovs.com/shop/prod/discovery-kids-teach-n-talk-laptop-charcoal/310524.htm?departmentNumber=10000015");
                inStockPage.inStock.should.be.equal(true);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.inStock.should.be.equal(true);
                inStockPage.image.should.be.equal('https://www.boscovs.com/wcsstore/boscovs/images/store/product/images/5475481391645086.jpg');
                inStockPage.country.should.be.equal('us');
                inStockPage.sku.should.be.equal('310524')
            });

        });

    });

    xdescribe('Pre-order Page', function () {

        var payload = {
            "pageType": "product",
            "url": "https://www.tesco.com/direct/a-way-out-xbox-one/542-7362.prd?skuId=542-7362",
            "html": cache.load("https://www.tesco.com/direct/a-way-out-xbox-one/542-7362.prd?skuId=542-7362")
        }

        it('should return false when product is available for pre order', function (done) {

            Structure(payload, function (err, inStockPage) {
                var expected = JSON.stringify({
                    "name": "A Way Out Xbox One",
                    "price": "22.00",
                    "url": payload.url,
                    "inStock": false,
                    "stockLevel": null,
                    "image": "https://tesco.scene7.com/is/image/tesco/542-7362_PI_66650AL6?op_sharpen=1&id=FBrbB0&fmt=jpg&fit=constrain,1&wid=400&hei=507&op_sharpen=1",
                    "country": "uk",
                    "sku": '542-7362'
                })
                JSON.stringify(inStockPage).should.equal(expected);
                done()
            })
        });

    });

    xdescribe('Out of Stock Page', function () {

        var payload = {
            "pageType": "product",
            "url": "",
            "html": cache.load("")
        }

        it('should be true when product is in stock', function () {

            const inStockPage = Structure(payload)
            inStockPage.name.should.be.equal("Discovery Kids™ Teach \'n\' Talk Laptop - Charcoal");
            inStockPage.price.should.be.equal("14.99");
            inStockPage.url.should.be.equal("");
            inStockPage.inStock.should.be.equal(true);
            should(inStockPage.stockLevel).be.equal(null);
            inStockPage.inStock.should.be.equal(true);
            inStockPage.image.should.be.equal('');
            inStockPage.country.should.be.equal('');
        });

    });

    describe('Search page category', function () {

        var payload = {
            "pageType": "category",
            "url": "https://www.boscovs.com/lpc/webbusters?pdn=25000000",
            "html": cache.load("https://www.boscovs.com/lpc/webbusters?pdn=25000000")
        }

        it('should be true when number of items and pages correct', function () {
            var expected = JSON.stringify({
                "name": "WebBusters",
                "url": "https://www.boscovs.com/lpc/webbusters?pdn=25000000"
            })

            const category = Structure(payload)

            JSON.stringify(category).should.equal(expected);
        });

        describe('Search Page', function () {

            var payload = {
                "pageType": "search",
                "url": "https://www.boscovs.com/ast/as-seen-on-tv?prnt=Home&chld=As%20Seen%20on%20TV",
                "html": cache.load("https://www.boscovs.com/ast/as-seen-on-tv?prnt=Home&chld=As%20Seen%20on%20TV")
            }
            var x = 47
            it('should return' + x + ' numer of products', function () {

                const inStockPage = Structure(payload)
                inStockPage.length.should.equal(x)

                var first = inStockPage.shift()
                first.name.should.be.equal("AS SEEN ON TV! Power Air Fryer");
                first.price.should.be.equal("159.99");
                first.url.should.be.equal("https://www.boscovs.com/shop/prod/as-seen-on-tv-power-air-fryer/27300.htm");
                first.country.should.be.equal('us');

                var last = inStockPage.pop()

                last.name.should.be.equal("AS SEEN ON TV! Solar String Lights");
                last.price.should.be.equal("9.99");
                last.url.should.be.equal("https://www.boscovs.com/shop/prod/as-seen-on-tv-solar-string-lights/534579.htm");
                last.country.should.be.equal('us');

            });

        });

    })