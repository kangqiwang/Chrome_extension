const should = require('should');
const saveJobCategoryPayload = require('../lib/saveJobCategoryPayload');
const tk = require('timekeeper')
var time = new Date(1528107831000);
tk.freeze(time);

describe('Reverse Search Payload Test', () => {

    it('should create reverse search payload for single asin', () => {

        const saveJobPayload = saveJobCategoryPayload({
            country: 'us',
            originalCategory: 'Home & Kitchen',
            categoryKey: 'home_garden_display_on_website',
            category: 'home_garden_display_on_website',
            userName: 'mike',
            userId: '585d5951cc787451ccefab7e',
            size: 100,
            scroll: "2m",
            categorySearchAge: 100
        });

        saveJobPayload.status.should.be.equal("QUEUED");
        saveJobPayload.created.toISOString().should.be.equal("2018-06-04T10:23:51.000Z");
        saveJobPayload.jobType.should.be.equal('CATEGORY_SEARCH');
        saveJobPayload.subType.should.be.equal('home_garden_display_on_website');
        saveJobPayload.category.should.be.equal('home_garden_display_on_website');
        saveJobPayload.country.should.be.equal('us');
        saveJobPayload.userName.should.be.equal('mike');
        saveJobPayload.userId.should.be.equal('585d5951cc787451ccefab7e');
        saveJobPayload.name.should.be.equal('Home & Kitchen');
        saveJobPayload.idName.should.be.equal('mike-HOME_GARDEN_CATEGORY_SEARCH-us-20180604-102351');
        saveJobPayload.size.should.be.equal(100);
        saveJobPayload.scroll.should.be.equal("2m");
        saveJobPayload.categorySearchAge.should.be.equal(100);
    });

});