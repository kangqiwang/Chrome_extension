    var should = require('should');
    var Structure = require('../lib/structure.js')
    const cache = require('../lib/cache')

    describe('supplierTest', function () {

        describe('Search Page', function () {

            var payload = {
                "pageType": "search",
                "url": "https://www.homedepot.com/b/Heating-Venting-Cooling-Fireplaces-Electric-Fireplaces-Fireplace-TV-Stands/N-5yc1vZc4l1?browsestoreoption=2&Ns=P_REP_PRC_MODE%7C1",
                "html": cache.load("https://www.homedepot.com/b/Heating-Venting-Cooling-Fireplaces-Electric-Fireplaces-Fireplace-TV-Stands/N-5yc1vZc4l1?browsestoreoption=2&Ns=P_REP_PRC_MODE%7C1")
            }
            var x = 24
            it('should return' + x + ' number of products', function () {

                const searchPage = Structure(payload)
                console.log(searchPage)
                searchPage.length.should.equal(x)


                var first = searchPage.shift()
                first.name.should.be.equal("Little Live Pets - Wrapple - Styles May Vary");
                first.price.should.be.equal("14.99");
                first.url.should.be.equal("https://www.bestbuy.com/site/little-live-pets-wrapple-styles-may-vary/6288564.p?skuId=6288564");
                first.image.should.be.equal("https://pisces.bbystatic.com/image2/BestBuy_US/images/products/6288/6288564_sd.jpg;maxHeight=200;maxWidth=300")
                first.country.should.be.equal('us');

                var last = searchPage.pop()

                last.name.should.be.equal("LEGO - Minecraft The Crafting Box 2.0");
                last.price.should.be.equal("47.99");
                last.url.should.be.equal("https://www.bestbuy.com/site/lego-minecraft-the-crafting-box-2-0/6203186.p?skuId=6203186");
                last.image.should.be.equal("https://pisces.bbystatic.com/image2/BestBuy_US/images/products/6203/6203186_sd.jpg;maxHeight=200;maxWidth=300")
                last.country.should.be.equal('us');


            });

        });

        describe('In stock Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.alza.co.uk/brother-dcp-t710w-d5319144.htm",
                "html": cache.load("https://www.alza.co.uk/brother-dcp-t710w-d5319144.htm")
            }

            it('should be true when product is in stock', function () {

                const inStockPage = Structure(payload)
                 console.log(inStockPage)
                inStockPage.name.should.be.equal("Keurig - K200 Single-Serve K-Cup Pod Coffee Maker - Black");
                inStockPage.price.should.be.equal("69.99");
                inStockPage.url.should.be.equal(payload.url);
                inStockPage.inStock.should.be.equal(true);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.inStock.should.be.equal(true);
                inStockPage.image.should.be.equal('https://assets.bbystatic.com/header-footer/images/bby_logo-a7e90594729ed2e119331378def6c97e.png');
                inStockPage.country.should.be.equal('us');
            });

        });

        describe('Out Of Stock Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.bestbuy.com/site/tcl-65-class-led-4-series-2160p-smart-4k-uhd-tv-with-hdr-roku-tv/6200311.p?skuId=6200311",
                "html": cache.load("https://www.bestbuy.com/site/tcl-65-class-led-4-series-2160p-smart-4k-uhd-tv-with-hdr-roku-tv/6200311.p?skuId=6200311")
            }

            it('should return false when product is out of stock', function () {

                const inStockPage = Structure(payload)
                inStockPage.name.should.be.equal("TCL - 65\" Class - LED - 4 Series - 2160p - Smart - 4K UHD TV with HDR Roku TV");
                inStockPage.price.should.be.equal('399.99');
                inStockPage.url.should.be.equal(payload.url);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.inStock.should.be.equal(false);
                inStockPage.image.should.be.equal('https://assets.bbystatic.com/header-footer/images/bby_logo-a7e90594729ed2e119331378def6c97e.png');
                inStockPage.country.should.be.equal('us')
            });

        });


        
        describe('In Store Only Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.bestbuy.com/site/toshiba-43-class-led-2160p-smart-4k-uhd-tv-with-hdr-fire-tv-edition/6194907.p?skuId=6194907",
                "html": cache.load("https://www.bestbuy.com/site/toshiba-43-class-led-2160p-smart-4k-uhd-tv-with-hdr-fire-tv-edition/6194907.p?skuId=6194907")
            }

            it('should return false when product is out of stock', function () {

                const inStockPage = Structure(payload)
            //    console.log(inStockPage)
                inStockPage.name.should.be.equal("Toshiba - 43” Class – LED - 2160p – Smart - 4K UHD TV with HDR – Fire TV Edition");
                inStockPage.price.should.be.equal('129.99');
                inStockPage.url.should.be.equal(payload.url);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.inStock.should.be.equal(false);
                inStockPage.image.should.be.equal('https://assets.bbystatic.com/header-footer/images/bby_logo-a7e90594729ed2e119331378def6c97e.png');
                inStockPage.country.should.be.equal('us')
            });

        });


    });