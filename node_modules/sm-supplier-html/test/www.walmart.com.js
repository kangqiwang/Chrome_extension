    var should = require('should');
    var Structure = require('../lib/structure.js')
    const cache = require('../lib/cache')

    describe('supplierTest', function () {

        describe('Search Page', function () {

            var payload = {
                "pageType": "search",
                "url": "https://www.walmart.com/browse/action-figures/all-action-figures/4171_4172_133130?povid=216950+%7C+2018-04-30+%7C+Action%20Figures%20-%20feat%20cat%20tile",
                "html": cache.load("https://www.walmart.com/browse/action-figures/all-action-figures/4171_4172_133130?povid=216950+%7C+2018-04-30+%7C+Action%20Figures%20-%20feat%20cat%20tile")
            }
            var x = 40
            it('should return' + x + ' number of products', function () {

                const searchPage = Structure(payload)
                //    console.log(searchPage)
                searchPage.length.should.equal(x)


                var first = searchPage.shift()
                first.name.should.be.equal("Marvel Black Panther 6-inch Black Panther");
                first.price.should.be.equal("9.99");
                first.url.should.be.equal("https://www.walmart.com/ip/Marvel-Black-Panther-6-inch-Black-Panther/560969765");
                first.image.should.be.equal("https://i5.walmartimages.com/asr/a34c4344-c0a3-4874-bb6d-61aeb57ca689_1.94086b1bdb82d23c6c8cd46895569b72.jpeg?odnWidth=200&odnHeight=200&odnBg=ffffff")
                first.country.should.be.equal('us');
                first.sku.should.be.equal('560969765')

                var last = searchPage.pop()

                last.name.should.be.equal("Marvel 6 Inch Legends Venom");
                last.price.should.be.equal("17.90");
                last.url.should.be.equal("https://www.walmart.com/ip/Marvel-6-Inch-Legends-Venom/282586496");
                last.image.should.be.equal("https://i5.walmartimages.com/asr/7a764ad6-8bc3-48d6-b7eb-c6a77ec2e38f_1.f08ff8535b77f6fa16382407c04feb66.jpeg?odnWidth=200&odnHeight=200&odnBg=ffffff")
                last.country.should.be.equal('us');
                last.sku.should.be.equal('282586496')


            });

        });

        describe('In stock Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.walmart.com/ip/Marvel-Black-Panther-6-inch-Black-Panther/560969765",
                "html": cache.load("https://www.walmart.com/ip/Marvel-Black-Panther-6-inch-Black-Panther/560969765")
            }

            it('should be true when product is in stock', function () {

                const inStockPage = Structure(payload)
                //   console.log(inStockPage)
                inStockPage.name.should.be.equal("Marvel Black Panther 6-inch Black Panther");
                inStockPage.price.should.be.equal("9.99");
                inStockPage.url.should.be.equal(payload.url);
                inStockPage.inStock.should.be.equal(true);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.inStock.should.be.equal(true);
                inStockPage.image.should.be.equal('https://i5.walmartimages.com/asr/a34c4344-c0a3-4874-bb6d-61aeb57ca689_1.94086b1bdb82d23c6c8cd46895569b72.jpeg?odnHeight=450&odnWidth=450&odnBg=FFFFFF');
                inStockPage.country.should.be.equal('us');
                inStockPage.sku.should.be.equal('560969765')
            });

        });

        describe('Out Of Stock Page', function () {

            var payload = {
                "pageType": "product",
                "url": "https://www.walmart.com/ip/WWE-2K17-2K-Xbox-360-710425497537/52539558",
                "html": cache.load("https://www.walmart.com/ip/WWE-2K17-2K-Xbox-360-710425497537/52539558")
            }

            it('should return false when product is out of stock', function () {

                const inStockPage = Structure(payload)
                inStockPage.name.should.be.equal("WWE 2K17, 2K, Xbox 360, 710425497537");
                inStockPage.price.should.be.equal('5.00');
                inStockPage.url.should.be.equal(payload.url);
                should(inStockPage.stockLevel).be.equal(null);
                inStockPage.inStock.should.be.equal(false);
                inStockPage.image.should.be.equal('https://i5.walmartimages.com/asr/528f9a64-6b8e-4bbb-8979-38ced8ee660e_1.cf08ea3e57d27b67b50e9732d6713fee.jpeg?odnWidth=282&odnHeight=282&odnBg=ffffff');
                inStockPage.country.should.be.equal('us')
            });

        });

    });