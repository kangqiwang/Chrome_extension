const should = require('should');
const opportuntiyRestructure = require('../model/opportunityRestructure');


const opportunityRecord = require('./opportunityRecord.js')

describe('Opportunity Restructure Test', function() {

        it('should restructure the data', function() {
                var result = opportuntiyRestructure('uk', opportunityRecord)
                result.supplier.name.should.be.equal("www.toysrus.co.uk")
                result.supplier.productTitle.should.be.equal("WWE Heath Slater Figure")
                result.supplier.price.should.be.equal("£10.99")
                result.supplier.url.should.be.equal("http://www.toysrus.co.uk/toys/wwe-heath-slater-figure/0131762")
                result.supplier.image.should.be.equal("http://truimg.toysrus.co.uk/product/images/UK /0131762_CF0001.jpg?resize=150:150")
                result.supplier.dateAnalysed.should.be.equal("2017-03-27T17:51:08.356Z")
                result.amazon.asin.should.be.equal("B00XEPIPN2")
                result.amazon.url.should.be.equal("http://www.amazon.co.uk/dp/B00XEPIPN2")
                result.amazon.name.should.be.equal("Amazon")
                result.amazon.productTitle.should.be.equal("WWE Superstar Heath Slater Figure")
                result.amazon.price.should.be.equal("£16.99")
                result.amazon.image.should.be.equal("http://ecx.images-amazon.com/images/I/41Yvd52jH1L._SL220_.jpg")
                result.amazon.dateAnalysed.should.be.equal("2017-02-21T14:17:25.805Z")
                result.amazon.category.should.be.equal("toy_display_on_website")
                result.amazon.details.salesRankPercentage.should.be.equal("4.3%")
                result.amazon.details.salesRank.should.be.equal("271925")
                result.amazon.details.ROI.should.be.equal("15.92%")
                result.amazon.details.profit.should.be.equal("£1.75")
                result.amazon.dimensions.weight.should.be.equal("0.31 pounds")
                result.amazon.dimensions.height.should.be.equal("1.89 inches")
                result.amazon.dimensions.width.should.be.equal("6.50 inches")
                result.amazon.dimensions.length.should.be.equal("10.47 inches")
                result.amazon.fees.referralFee.should.be.equal("£2.55")
                result.amazon.fees.fbaFee.should.be.equal("£1.70")
                result.amazon.fees.totalCost.should.be.equal("£4.25")
                result.amazon.competition[0].title.should.be.equal("Seller 1")
                result.amazon.competition[0].channel.should.be.equal("Merchant")
                result.amazon.competition[0].price.should.be.equal("£14.99")
                result.amazon.competition[0].feedback.should.be.equal("3378")
                result.amazon.competition[0].feedbackPercentage.should.be.equal("98-100%")
                result.amazon.competition.length.should.be.equal(6)
                result.productChecks.merchantOnly.should.be.equal(true),
                result.productChecks.hasBuyBox.should.be.equal(true),
                result.productChecks.fbaEstimate.should.be.equal(true),
                result.productChecks.samePrice.should.be.equal(true),
                result.productChecks.stock.should.be.equal(true),
                result.productChecks.restricted.should.be.equal(true)
        })

})
