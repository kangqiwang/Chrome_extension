const should = require('should');
const saveJobSupplierPayload = require('../lib/saveJobSupplierPayload');
const tk = require('timekeeper')
var time = new Date(1528107831000);
tk.freeze(time);

describe('Save Job Supplier Test', () => {

    it('should create reverse search payload for single asin', () => {

        const saveJobPayload = saveJobSupplierPayload({
          country: 'us',
          supplierId: '58593450d2b2122cab550f1f',
          supplierName: 'A4c',
          options: { shippingFee: 18, coupon: 12 },
          fastSearch: false,
          userName: 'mike',
          userId: '585d5951cc787451ccefab7e',
          domain: 'www.A4c.com',
          selectedPeriod: 'v72'
        });

        saveJobPayload.domain.should.be.equal("www.a4c.com");
        saveJobPayload.status.should.be.equal("QUEUED");
        saveJobPayload.created.toISOString().should.be.equal("2018-06-04T10:23:51.000Z");
        saveJobPayload.jobType.should.be.equal('SUPPLIER_SEARCH');
        saveJobPayload.country.should.be.equal('us');
        saveJobPayload.userName.should.be.equal('mike');
        saveJobPayload.userId.should.be.equal('585d5951cc787451ccefab7e');
        saveJobPayload.name.should.be.equal('A4c');
        saveJobPayload.idName.should.be.equal('mike-A4C_SUPPLIER_SEARCH-us-20180604-102351');
        saveJobPayload.selectedPeriod.should.be.equal('v72');
        saveJobPayload.options.shippingFee.should.be.equal(18)
        saveJobPayload.options.coupon.should.be.equal(12)
    });

});