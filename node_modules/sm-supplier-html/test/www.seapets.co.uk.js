var should = require('should');
var Structure = require('../lib/structure.js')

describe('www.seapets.co.uk', function() {

    before(function()  {
        this.timeout(5000);
    })

    describe('In Stock Page', function() {

        var payload = {
            "pageType" : "product",
            "url" : "https://www.seapets.co.uk/juwel-trigon-350-bow-front-corner-aquarium-and-cabinet-dark-wood-47514"
        }

        it('should be true when product is in stock', function (done) {

            Structure(payload, function(inStockPage) {
                var expected = JSON.stringify({
                    "name": "Juwel Trigon 350 Bow Front Corner Aquarium and Cabinet Dark Wood",
                    "price": "1150.00",
                    "url": null,
                    "inStock": true,
                    "stockLevel": null,
                    "image": "https://www.seapets.co.uk/Upload/max700/917a1-970498.jpg",
                    "country": "uk"
                })
                JSON.stringify(inStockPage).should.equal(expected);
                done()
            })
        });

    });

    // describe('Out of Stock Page', function() {

    //     var payload = {
    //         "pageType" : "product",
    //         "url" : ""
    //     }

    //     it('should return false when product is out of stock', function(done) {

    //         Structure(payload, function(inStockPage) {
    //             var expected = JSON.stringify({
    //                 "name": "",
    //                 "price": "",
    //                 "url": null,
    //                 "inStock": false,
    //                 "stockLevel": null
    //             })
    //             JSON.stringify(inStockPage).should.equal(expected);
    //             done()
    //         })
    //     })

    // })

});
