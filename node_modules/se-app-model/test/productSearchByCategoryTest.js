const expect = require('chai').expect;
const ProductModel = require('../index.js').model.product;
const config = require('../config').es;

describe('Search By Category', function () {

    let message;

    this.timeout(10000);

    beforeEach(() => {
        message = {
            type: 'categories/SEARCH_BY_CATEGORY',
            data: { country: 'us', category: 'sports_display_on_website' },
            userName: 'mike',
            userId: '585d5951cc787451ccefab7e'
        }
    });

    it('should return the number of results in total', (done) => {
        let Product = new ProductModel(config, message.data.country);
        Product.searchByCategory(message, (err, results)=>{
            expect(err).to.equal(null);
            expect(results).to.have.property('total');
            expect(results.total).to.be.a('number');
            expect(results.total).to.be.above(0);
            done();
        });
    });
});
