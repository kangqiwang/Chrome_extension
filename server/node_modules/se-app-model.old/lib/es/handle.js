var elasticsearch = require('elasticsearch');

let hdl = null;


module.exports = (config, next) => {

    if(hdl === null || config.newHandle) {
        hdl =  new elasticsearch.Client({
            host: config.host,
            keepAlive: true,
            keepAliveInterval: 1000,
            maxRetries: 300,
            requestTimeout: 50000
        });
    }

    next(null, hdl);
};
