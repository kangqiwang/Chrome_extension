const should = require('should');
const CategoriesModel = require('../index.js').model.categories
const config = {
    db: "se",
    host: "127.0.0.1",
    port: 27017
}

describe('CategoriesModel Test', function () {

    it('should get all the uk categories and data', function (done) {
        var Categories = new CategoriesModel(config, {
            country: "uk"
        })

        Categories.getCategories((err, result) => {
            should(err).be.equal(null)
            done()
        })
    })

    // it('should insert one category into the database', function(done) {
    //     var Categories = new CategoriesModel(config, {
    //             country: "uk"
    //     })

    //     Categories.saveCategory({

    //         name: "testName",
    //         amazonId: "testAmazonId",
    //         total: 45675,
    //         country: "uk"

    //     },(err, result) => {
    //         should(err).be.equal(null)
    //         done()
    //     })
    // })

    it('should update the category if it already exists in the database', function (done) {
        var Categories = new CategoriesModel(config, {
            country: "us"
        })

        Categories.updateCategory({

            name: "update",
            amazonId: "update",
            total: "update",
            country: "us",
            iconClass: "amIanIcon",
            id: "598048c8f6ac7d7facaa6741"


        }, (err, result) => {
            should(err).be.equal(null)
            done()
        })
    })

    it('should delete the category by id', function (done) {
        var Categories = new CategoriesModel(config, {
            country: "uk"
        })

        Categories.deleteCategory({
            id: "598039d5c8f4f77b07858ab6"


        }, (err, result) => {
            should(err).be.equal(null)
            done()
        })
    })

    it('should return UK CategoriesModel as array', function (done) {
        var Categories = new CategoriesModel(config, {
            country: "uk"
        })

        Categories.findTotals((err, result) => {
            console.log('result: ', result);
            should(err).be.equal(null)
            result.should.have.property('toy_display_on_website')
            done();
        })

    })

    it('should return Category Lookup Table', function (done) {
        var Categories = new CategoriesModel(config, {
            country: "uk"
        })

        Categories.generateLookup((err, result) => {
            should(err).be.equal(null)
            result.should.have.property('toy_display_on_website')
            done();
        })

    })

})
