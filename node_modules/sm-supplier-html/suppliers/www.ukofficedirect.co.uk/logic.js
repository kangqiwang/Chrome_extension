var PageInfo = require ('../../lib/pageInfo.js')

module.exports = {
    'product' : function($, next) {
        var info  = new PageInfo()
        info.inStock = isStock($)
        info.name = getName($)
        info.price = getPrice($)
        info.image = image($)
        info.country = "us"
        return info
    }
}

var isStock = function inStock($) {
    var isInStock = true;
    var producttop = $('.delivery').html()

    if(producttop !== null) {
        if(producttop.indexOf('Out of stock') > -1) {
            isInStock = false
        }
    }

    return isInStock
}

var getPrice = function thePrice($) {
    return null // this site displays prices exc of vat
}

var getName = function theName($) {
    return $('h1').text().trim()
}

var image = function image($) {
    return $('.zoomLens img').attr('src');
}

 